C51 COMPILER V9.60.7.0   IKEYEVENT                                                         09/24/2024 21:09:52 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE IKEYEVENT
OBJECT MODULE PLACED IN .\Objects\IKeyEvent.obj
COMPILER INVOKED BY: E:\ARM_KEIL\Arm\Keil_v5\C51\BIN\C51.EXE source\IKeyEvent.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXT
                    -END PRINT(.\Listings\IKeyEvent.lst) TABS(2) OBJECT(.\Objects\IKeyEvent.obj)

line level    source

   1          /* IKeyEvent.c */
   2          #include "reg52.h"
   3          #include "include/delay.h"
   4          #include "include/IKeyEvent.h"
   5          
   6          #define DEBOUNCE_DELAY 2 // 防抖延迟时间（单位：毫秒）
   7          
   8          /**
   9           * @brief 检查按钮状态并处理防抖
  10           * 
  11           * @param button 按钮的当前状态（0 表示按下，1 表示释放）
  12           */
  13          void checkButtonState(bit button) {
  14   1          // 如果按钮状态为按下（0）
  15   1          if (button == 0) {
  16   2              // 延迟一段时间以防抖动
  17   2              DelayMs(DEBOUNCE_DELAY);
  18   2              // 再次检查按钮状态
  19   2              if (button == 0) {
  20   3                  displayTemperatureOrTime = !displayTemperatureOrTime; // 切换显示状态
  21   3                  DelayMs(DEBOUNCE_DELAY); // 再次延迟以防止抖动
  22   3              }
  23   2              // 等待按钮释放（状态变为1）
  24   2              while (!button);
  25   2          }
  26   1      }
  27          
  28          /**
  29           * @brief 检查所有按钮的状态
  30           */
  31          void checkButtons(void) {
  32   1          // 检查温度或时间切换按钮的状态
  33   1          checkButtonState(switchButton); // 更新状态
  34   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     29    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
